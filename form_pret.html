<!-- pret.html -->
<h2>Creer un pret</h2>
<div id="message"></div>

<form onsubmit="creerPret(event)">
  <select id="id_compte_client" required></select>
  <select id="id_type_pret" required></select>
  <input type="date" id="date_pret" required><br>
  <input type="number" id="montant" placeholder="Montant du pret" step="0.01" required><br>
  <input type="number" id="duree" placeholder="Duree (mois)" required><br>
  <button type="submit">Creer le pret</button>
</form>

<script>
function creerPret(e) {
  e.preventDefault();
  const data = 
    `id_compte_client=${document.getElementById("id_compte_client").value}&` +
    `id_type_pret=${document.getElementById("id_type_pret").value}&` +
    `date_pret=${document.getElementById("date_pret").value}&` +
    `montant=${document.getElementById("montant").value}&` +
    `duree=${document.getElementById("duree").value}`;

  ajax("POST", "/prets", data, (res) => {
    const msgDiv = document.getElementById("message");
    msgDiv.innerHTML = res.error 
      ? `<p style="color:red">${res.error}</p>` 
      : `<p style="color:green">${res.message}</p>`;
  });
}
</script>
