<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <title>Ajouter un Fond</title>
</head>

<body>
    <h2>Ajouter un Fond</h2>
    <label for="montant">Montant :</label>
    <input type="number" id="montant" name="montant" step="0.01" min="0" required>
    <button onclick="ajoutMontant()">Ajouter</button>
    <p id="message"></p>
    <!-- <script src="ws\assets\js\base.js"></script> -->
    <script>
        const apiBase = "http://localhost:90/examFinalS4/ws";

        function ajax(method, url, data, callback) {
            const xhr = new XMLHttpRequest();
            xhr.open(method, apiBase + url, true);
            xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
            xhr.onreadystatechange = () => {
                if (xhr.readyState === 4 && xhr.status === 200) {
                    callback(JSON.parse(xhr.responseText));
                }
            };
            xhr.send(data);
            
        }
        function ajoutMontant() {
            const montant = document.getElementById("montant").value;

            const data = `montant=${encodeURIComponent(montant)}`;
            

            // Correction de l'URL pour inclure le bon chemin relatif
            ajax("POST", "/fond", data, (response) => { 
                resetForm();
                // La réponse est déjà un objet JSON, inutile de refaire JSON.parse
                document.getElementById("message").textContent = response.message;
            });
        }
        function remplirFormulaire(e) {
            document.getElementById("montant").value = e.montant;
        }
        function resetForm() {
            document.getElementById("montant").value = "";
        }
    </script>
</body>

</html>